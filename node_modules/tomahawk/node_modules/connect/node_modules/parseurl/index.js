function t(r){var n,t;return"string"==typeof r&&a.test(r)&&(n=i.exec(r))?(t=void 0!==e?new e:{},t.path=r,t.href=r,t.pathname=n[1],n[2]&&(t.search=n[2],t.query=t.search.substr(1)),t):o(r)}function n(r,t){return"object"==typeof t&&null!==t&&(void 0===e||t instanceof e)&&t.href===r.url}var r=require("url"),o=r.parse,e=r.Url,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=/^\/[^\\#]*$/;module.exports=function(r){var e=r._parsedUrl;return n(r,e)?e:(e=t(r.url),e.auth&&!e.protocol&&-1!==e.href.indexOf("//")&&(e=t(r.url.replace(/@/g,"%40"))),r._parsedUrl=e)};