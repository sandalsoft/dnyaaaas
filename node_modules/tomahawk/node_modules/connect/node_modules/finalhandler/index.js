function t(i,t,s){var c,a;return s=s||{},c=s.env||process.env.NODE_ENV||"development",a=s.onerror,function(s){var u;return s?((!t.statusCode||t.statusCode<400)&&(t.statusCode=500),s.status&&(t.statusCode=s.status),u="production"===c?n.STATUS_CODES[t.statusCode]:s.stack||""+s,u=e(u).replace(/\n/g,"<br>").replace(/  /g," &nbsp;")+"\n"):(t.statusCode=404,u="Cannot "+e(i.method)+" "+e(i.originalUrl||i.url)+"\n"),r("default %s",t.statusCode),s&&a&&o(a,s,i,t),t._header?i.socket.destroy():(t.setHeader("Content-Type","text/html; charset=utf-8"),t.setHeader("Content-Length",Buffer.byteLength(u,"utf8")),"HEAD"===i.method?void t.end():void t.end(u,"utf8"))}}var r=require("debug")("finalhandler"),e=require("escape-html"),n=require("http"),o="function"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};module.exports=t;