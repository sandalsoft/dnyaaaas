function r(t,r){var n,e;if(r=r||{},this.name=t,this.root=r.root,n=r.engines,this.defaultEngine=r.defaultEngine,e=this.ext=c(t),!e&&!this.defaultEngine)throw Error("No default engine was specified and no extension was provided.");e||(t+=e=this.ext=("."!=this.defaultEngine[0]?".":"")+this.defaultEngine),this.engine=n[e]||(n[e]=require(e.slice(1)).__express),this.path=this.lookup(t)}var e=require("path"),o=require("fs"),i=require("./utils"),a=e.dirname,s=e.basename,c=e.extname,t=o.existsSync||e.existsSync,n=e.join;module.exports=r,r.prototype.lookup=function(e){var r=this.ext;return i.isAbsolute(e)||(e=n(this.root,e)),t(e)?e:(e=n(a(e),s(e,r),"index"+r),t(e)?e:void 0)},r.prototype.render=function(e,r){this.engine(this.path,e,r)};