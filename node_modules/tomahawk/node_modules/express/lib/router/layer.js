function e(o,t,i){return this instanceof e?(n("new %s",o),t=t||{},this.handle=i,this.name=i.name||"<anonymous>",this.params=void 0,this.path=void 0,this.regexp=r(o,this.keys=[],t),void("/"===o&&t.end===!1&&(this.regexp.fast_slash=!0))):new e(o,t,i)}function t(e){if("string"!=typeof e)return e;try{return decodeURIComponent(e)}catch(r){var t=new TypeError("Failed to decode param '"+e+"'");throw t.status=400,t}}var r=require("path-to-regexp"),n=require("debug")("express:router:layer");module.exports=e,e.prototype.handle_error=function(t,n,o,e){var r=this.handle;if(4!==r.length)return e(t);try{r(t,n,o,e)}catch(i){e(i)}},e.prototype.handle_request=function(r,n,e){var t=this.handle;if(t.length>3)return e();try{t(r,n,e)}catch(o){e(o)}},e.prototype.match=function(u){var e,a,n,s,o,i,r,c;if(this.regexp.fast_slash)return this.params={},this.path="",!0;if(e=this.regexp.exec(u),!e)return this.params=void 0,this.path=void 0,!1;for(this.params={},this.path=e[0],a=this.keys,n=this.params,s=0,r=1,c=e.length;c>r;++r)o=a[r-1],i=t(e[r]),o?n[o.name]=i:n[s++]=i;return!0};