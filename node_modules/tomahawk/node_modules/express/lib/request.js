function t(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:r})}var r=require("accepts"),n=require("depd")("express"),i=require("type-is"),s=require("http"),a=require("fresh"),c=require("range-parser"),u=require("parseurl"),o=require("proxy-addr"),e=exports=module.exports={__proto__:s.IncomingMessage.prototype};e.get=e.header=function(e){switch(e=e.toLowerCase()){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[e]}},e.accepts=function(){var e=r(this);return e.types.apply(e,arguments)},e.acceptsEncodings=function(){var e=r(this);return e.encodings.apply(e,arguments)},e.acceptsEncoding=n.function(e.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead"),e.acceptsCharsets=function(){var e=r(this);return e.charsets.apply(e,arguments)},e.acceptsCharset=n.function(e.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead"),e.acceptsLanguages=function(){var e=r(this);return e.languages.apply(e,arguments)},e.acceptsLanguage=n.function(e.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead"),e.range=function(t){var e=this.get("Range");if(e)return c(t,e)},e.param=function(e,o){var t=this.params||{},r=this.body||{},n=this.query||{};return null!=t[e]&&t.hasOwnProperty(e)?t[e]:null!=r[e]?r[e]:null!=n[e]?n[e]:o},e.is=function(e){return Array.isArray(e)||(e=[].slice.call(arguments)),i(this,e)},t(e,"protocol",function(){var e,t=this.app.get("trust proxy fn");return t(this.connection.remoteAddress)?(e=this.get("X-Forwarded-Proto")||"http",e.split(/\s*,\s*/)[0]):this.connection.encrypted?"https":"http"}),t(e,"secure",function(){return"https"==this.protocol}),t(e,"ip",function(){var e=this.app.get("trust proxy fn");return o(this,e)}),t(e,"ips",function(){var e=this.app.get("trust proxy fn"),t=o.all(this,e);return t.slice(1).reverse()}),t(e,"subdomains",function(){var e=this.app.get("subdomain offset");return(this.hostname||"").split(".").reverse().slice(e)}),t(e,"path",function(){return u(this).pathname}),t(e,"hostname",function(){var r,t,n=this.app.get("trust proxy fn"),e=this.get("X-Forwarded-Host");return e&&n(this.connection.remoteAddress)||(e=this.get("Host")),e?(r="["===e[0]?e.indexOf("]")+1:0,t=e.indexOf(":",r),~t?e.substring(0,t):e):void 0}),t(e,"host",n.function(function(){return this.hostname},"req.host: Use req.hostname instead")),t(e,"fresh",function(){var t=this.method,e=this.res.statusCode;return"GET"!=t&&"HEAD"!=t?!1:e>=200&&300>e||304==e?a(this.headers,this.res._headers):!1}),t(e,"stale",function(){return!this.fresh}),t(e,"xhr",function(){var e=this.get("X-Requested-With")||"";return"xmlhttprequest"==e.toLowerCase()});