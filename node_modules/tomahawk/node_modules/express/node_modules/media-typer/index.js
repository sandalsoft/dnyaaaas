function i(e){var n,o,i,a,s,c,f,u;if(!e||"object"!=typeof e)throw new TypeError("argument obj is required");if(n=e.parameters,o=e.subtype,i=e.suffix,a=e.type,!a||!r.test(a))throw new TypeError("invalid type");if(!o||!l.test(o))throw new TypeError("invalid subtype");if(s=a+"/"+o,i){if(!r.test(i))throw new TypeError("invalid suffix");s+="+"+i}if(n&&"object"==typeof n)for(f=Object.keys(n).sort(),u=0;u<f.length;u++){if(c=f[u],!t.test(c))throw new TypeError("invalid parameter name");s+="; "+c+"="+p(n[c])}return s}function a(t){var n,l,p,i,a,u,r;if(!t)throw new TypeError("argument string is required");if("object"==typeof t&&(t=s(t)),"string"!=typeof t)throw new TypeError("argument string is required to be a string");for(n=t.indexOf(";"),l=-1!==n?t.substr(0,n):t,a=o(l),u={},e.lastIndex=n;i=e.exec(t);)p=i[1].toLowerCase(),r=i[2],'"'===r[0]&&(r=r.substr(1,r.length-2).replace(c,"$1")),u[p]=r;return a.parameters=u,a}function s(e){return"function"==typeof e.getHeader?e.getHeader("content-type"):"object"==typeof e.headers?e.headers&&e.headers["content-type"]:void 0}function p(r){var e=r+"";if(t.test(e))return e;if(e.length>0&&!n.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(u,"\\$1")+'"'}function o(i){var n,e,o,t,a,r=f.exec(i.toLowerCase());if(!r)throw new TypeError("invalid media type");return n=r[1],e=r[2],t=e.lastIndexOf("+"),-1!==t&&(o=e.substr(t+1),e=e.substr(0,t)),a={type:n,subtype:e,suffix:o}}var e=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g,n=/^[\u0020-\u007e\u0080-\u00ff]+$/,t=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/,c=/\\([\u0000-\u007f])/g,u=/([\\"])/g,l=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,r=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,f=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;exports.format=i,exports.parse=a;