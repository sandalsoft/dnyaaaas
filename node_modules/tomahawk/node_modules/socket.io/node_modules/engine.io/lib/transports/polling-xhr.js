function e(e){t.call(this,e)}var t=require("./polling"),r=require("../transport"),n=require("debug")("engine:polling-xhr");module.exports=e,e.prototype.__proto__=t.prototype,e.prototype.onRequest=function(e){var r,n;"OPTIONS"==e.method?(r=e.res,n=this.headers(e),n["Access-Control-Allow-Headers"]="Content-Type",r.writeHead(200,n),r.end()):t.prototype.onRequest.call(this,e)},e.prototype.doWrite=function(e){var r="string"==typeof e,o=r?"text/plain; charset=UTF-8":"application/octet-stream",s=""+(r?Buffer.byteLength(e):e.length),n={"Content-Type":o,"Content-Length":s},t=this.req.headers["user-agent"];t&&(~t.indexOf(";MSIE")||~t.indexOf("Trident/"))&&(n["X-XSS-Protection"]="0"),this.res.writeHead(200,this.headers(this.req,n)),this.res.end(e)},e.prototype.headers=function(t,e){return e=e||{},t.headers.origin?(e["Access-Control-Allow-Credentials"]="true",e["Access-Control-Allow-Origin"]=t.headers.origin):e["Access-Control-Allow-Origin"]="*",this.emit("headers",e),e};