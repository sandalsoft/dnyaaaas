var e=require("crypto"),t=function(){};t.prototype.getRandomBytes=function(t){var r,i,s,n=4096,o=this;return t=t||12,t>n?e.randomBytes(t):(r=parseInt(n/t),(i=parseInt(.85*r))?(null==this.bytesBufferIndex&&(this.bytesBufferIndex=-1),this.bytesBufferIndex==r&&(this.bytesBuffer=null,this.bytesBufferIndex=-1),(-1==this.bytesBufferIndex||this.bytesBufferIndex>i)&&(this.isGeneratingBytes||(this.isGeneratingBytes=!0,e.randomBytes(n,function(t,e){o.bytesBuffer=e,o.bytesBufferIndex=0,o.isGeneratingBytes=!1})),-1==this.bytesBufferIndex)?e.randomBytes(t):(s=this.bytesBuffer.slice(t*this.bytesBufferIndex,t*(this.bytesBufferIndex+1)),this.bytesBufferIndex++,s)):e.randomBytes(t))},t.prototype.generateId=function(){var t=new Buffer(15);return t.writeInt32BE?(this.sequenceNumber=this.sequenceNumber+1|0,t.writeInt32BE(this.sequenceNumber,11),e.randomBytes?this.getRandomBytes(12).copy(t):[0,4,8].forEach(function(e){t.writeInt32BE(Math.random()*Math.pow(2,32)|0,e)}),t.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")):""+Math.abs(Math.random()*Math.random()*Date.now()|0)+(""+Math.abs(Math.random()*Math.random()*Date.now()|0))},exports=module.exports=new t;